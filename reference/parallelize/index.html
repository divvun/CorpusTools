
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../packagetmx/">
      
      
        <link rel="next" href="../pdfconverter/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.8">
    
    
      
        <title>parallelize - CorpusTools documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.ded33207.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#corpustools.parallelize" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CorpusTools documentation" class="md-header__button md-logo" aria-label="CorpusTools documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CorpusTools documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              parallelize
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/giellalt/CorpusTools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    giellalt/CorpusTools
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Code reference
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CorpusTools documentation" class="md-nav__button md-logo" aria-label="CorpusTools documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CorpusTools documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/giellalt/CorpusTools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    giellalt/CorpusTools
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../corpus-work/" class="md-nav__link">
        Corpus work
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
      
      
      
        <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
          Scripts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          Scripts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/add_files_to_corpus/" class="md-nav__link">
        add_files_to_corpus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/convert2xml/" class="md-nav__link">
        convert2xml
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/ccat/" class="md-nav__link">
        ccat
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Code reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Code reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          corpustools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          corpustools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../_version/" class="md-nav__link">
        _version
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../adder/" class="md-nav__link">
        adder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../analyser/" class="md-nav__link">
        analyser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../argparse_version/" class="md-nav__link">
        argparse_version
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../avvirconverter/" class="md-nav__link">
        avvirconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../basicconverter/" class="md-nav__link">
        basicconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bibel_no_aligner/" class="md-nav__link">
        bibel_no_aligner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bibel_no_crawler/" class="md-nav__link">
        bibel_no_crawler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../biblexmlconverter/" class="md-nav__link">
        biblexmlconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ccat/" class="md-nav__link">
        ccat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ces2homegrown/" class="md-nav__link">
        ces2homegrown
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../check_para_consistency/" class="md-nav__link">
        check_para_consistency
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../clean_prestable/" class="md-nav__link">
        clean_prestable
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../compare_tmx_goldstandard/" class="md-nav__link">
        compare_tmx_goldstandard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../convert_using_pandoc/" class="md-nav__link">
        convert_using_pandoc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../convert_using_soffice/" class="md-nav__link">
        convert_using_soffice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../converter/" class="md-nav__link">
        converter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../convertermanager/" class="md-nav__link">
        convertermanager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../corpuspath/" class="md-nav__link">
        corpuspath
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../corpusxmlfile/" class="md-nav__link">
        corpusxmlfile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../counter/" class="md-nav__link">
        counter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../crawler/" class="md-nav__link">
        crawler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../debug_corpus/" class="md-nav__link">
        debug_corpus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../decode/" class="md-nav__link">
        decode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../docconverter/" class="md-nav__link">
        docconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../documentfixer/" class="md-nav__link">
        documentfixer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dropbox_adder/" class="md-nav__link">
        dropbox_adder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dupe_finder/" class="md-nav__link">
        dupe_finder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../epubchooser/" class="md-nav__link">
        epubchooser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../epubconverter/" class="md-nav__link">
        epubconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../errormarkup/" class="md-nav__link">
        errormarkup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../finder/" class="md-nav__link">
        finder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../generate_anchor_list/" class="md-nav__link">
        generate_anchor_list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../html_cleaner/" class="md-nav__link">
        html_cleaner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../htmlcontentconverter/" class="md-nav__link">
        htmlcontentconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../htmlconverter/" class="md-nav__link">
        htmlconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../iso_ir_197/" class="md-nav__link">
        iso_ir_197
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../iso_ir_209/" class="md-nav__link">
        iso_ir_209
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../korp_mono/" class="md-nav__link">
        korp_mono
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../korp_para/" class="md-nav__link">
        korp_para
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../languagedetector/" class="md-nav__link">
        languagedetector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../macsami/" class="md-nav__link">
        macsami
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mari/" class="md-nav__link">
        mari
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modes/" class="md-nav__link">
        modes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../move_files/" class="md-nav__link">
        move_files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../namechanger/" class="md-nav__link">
        namechanger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../normalise_filenames/" class="md-nav__link">
        normalise_filenames
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nrk_no_crawler/" class="md-nav__link">
        nrk_no_crawler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../one-off-functions/" class="md-nav__link">
        one-off-functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../packagetmx/" class="md-nav__link">
        packagetmx
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          parallelize
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        parallelize
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize" class="md-nav__link">
    corpustools.parallelize
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize" class="md-nav__link">
    Parallelize
  </a>
  
    <nav class="md-nav" aria-label="Parallelize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.lang1" class="md-nav__link">
    lang1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.lang2" class="md-nav__link">
    lang2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.origfile1" class="md-nav__link">
    origfile1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.origfile2" class="md-nav__link">
    origfile2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.outfile_name" class="md-nav__link">
    outfile_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.align" class="md-nav__link">
    align()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.is_translated_from_lang2" class="md-nav__link">
    is_translated_from_lang2()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.parallelize_files" class="md-nav__link">
    parallelize_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.setup_anchors" class="md-nav__link">
    setup_anchors()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeHunalign" class="md-nav__link">
    ParallelizeHunalign
  </a>
  
    <nav class="md-nav" aria-label="ParallelizeHunalign">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeHunalign.align" class="md-nav__link">
    align()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeHunalign.anchor_to_dict" class="md-nav__link">
    anchor_to_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeHunalign.make_dict" class="md-nav__link">
    make_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeHunalign.to_sents" class="md-nav__link">
    to_sents()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeTCA2" class="md-nav__link">
    ParallelizeTCA2
  </a>
  
    <nav class="md-nav" aria-label="ParallelizeTCA2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeTCA2.sentfiles" class="md-nav__link">
    sentfiles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeTCA2.align" class="md-nav__link">
    align()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeTCA2.divide_p_into_sentences" class="md-nav__link">
    divide_p_into_sentences()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeTCA2.generate_anchor_file" class="md-nav__link">
    generate_anchor_file()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.Tca2SentenceDivider" class="md-nav__link">
    Tca2SentenceDivider
  </a>
  
    <nav class="md-nav" aria-label="Tca2SentenceDivider">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Tca2SentenceDivider.make_sentence_file" class="md-nav__link">
    make_sentence_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Tca2SentenceDivider.make_sentence_xml" class="md-nav__link">
    make_sentence_xml()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.main" class="md-nav__link">
    main()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.parallelise_file" class="md-nav__link">
    parallelise_file()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.parse_options" class="md-nav__link">
    parse_options()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pdfconverter/" class="md-nav__link">
        pdfconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pick_parallel_docs/" class="md-nav__link">
        pick_parallel_docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pick_samediggi_se_docs/" class="md-nav__link">
        pick_samediggi_se_docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pick_titles/" class="md-nav__link">
        pick_titles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plaintextconverter/" class="md-nav__link">
        plaintextconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../realign/" class="md-nav__link">
        realign
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../saami_crawler/" class="md-nav__link">
        saami_crawler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../samas_crawler/" class="md-nav__link">
        samas_crawler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../samediggi_fi_crawler/" class="md-nav__link">
        samediggi_fi_crawler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../samediggi_no_crawler/" class="md-nav__link">
        samediggi_no_crawler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sentencedivider/" class="md-nav__link">
        sentencedivider
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../svgconverter/" class="md-nav__link">
        svgconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_65" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_65" id="__nav_2_1_65_label" tabindex="0">
          test
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_65_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_65">
          <span class="md-nav__icon md-icon"></span>
          test
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_adder/" class="md-nav__link">
        test_adder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_analyser/" class="md-nav__link">
        test_analyser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_avvirconverter/" class="md-nav__link">
        test_avvirconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_biblexmlconverter/" class="md-nav__link">
        test_biblexmlconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_ccat/" class="md-nav__link">
        test_ccat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_compare_tmx_goldstandard/" class="md-nav__link">
        test_compare_tmx_goldstandard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_converter/" class="md-nav__link">
        test_converter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_corpuspath/" class="md-nav__link">
        test_corpuspath
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_corpusxmlfile/" class="md-nav__link">
        test_corpusxmlfile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_decode/" class="md-nav__link">
        test_decode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_docconverter/" class="md-nav__link">
        test_docconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_documentfixer/" class="md-nav__link">
        test_documentfixer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_docxconverter/" class="md-nav__link">
        test_docxconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_epubchooser/" class="md-nav__link">
        test_epubchooser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_epubconverter/" class="md-nav__link">
        test_epubconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_errormarkup/" class="md-nav__link">
        test_errormarkup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_htmlcontentconverter/" class="md-nav__link">
        test_htmlcontentconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_htmlconverter/" class="md-nav__link">
        test_htmlconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_lang_guessing/" class="md-nav__link">
        test_lang_guessing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_languagedetector/" class="md-nav__link">
        test_languagedetector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_namechanger/" class="md-nav__link">
        test_namechanger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_parallelize/" class="md-nav__link">
        test_parallelize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_pdfconverter/" class="md-nav__link">
        test_pdfconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_pick_parallel_docs/" class="md-nav__link">
        test_pick_parallel_docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_plaintextconverter/" class="md-nav__link">
        test_plaintextconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_rtfconverter/" class="md-nav__link">
        test_rtfconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_samediggi_no_crawler/" class="md-nav__link">
        test_samediggi_no_crawler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_sentencedivider/" class="md-nav__link">
        test_sentencedivider
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_svgconverter/" class="md-nav__link">
        test_svgconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_text_cat/" class="md-nav__link">
        test_text_cat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_trainingcorpusmaker/" class="md-nav__link">
        test_trainingcorpusmaker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_typosfile/" class="md-nav__link">
        test_typosfile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_util/" class="md-nav__link">
        test_util
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_xhtml2corpus/" class="md-nav__link">
        test_xhtml2corpus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_xslmaker/" class="md-nav__link">
        test_xslmaker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/test_xslsetter/" class="md-nav__link">
        test_xslsetter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../test/xmltester/" class="md-nav__link">
        xmltester
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../text_cat/" class="md-nav__link">
        text_cat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tmx/" class="md-nav__link">
        tmx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trainingcorpusmaker/" class="md-nav__link">
        trainingcorpusmaker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../typosfile/" class="md-nav__link">
        typosfile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../update_metadata/" class="md-nav__link">
        update_metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usxconverter/" class="md-nav__link">
        usxconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../util/" class="md-nav__link">
        util
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../versioncontrol/" class="md-nav__link">
        versioncontrol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../winsami2/" class="md-nav__link">
        winsami2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../xmlconverter/" class="md-nav__link">
        xmlconverter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../xslmaker/" class="md-nav__link">
        xslmaker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../xslsetter/" class="md-nav__link">
        xslsetter
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize" class="md-nav__link">
    corpustools.parallelize
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize" class="md-nav__link">
    Parallelize
  </a>
  
    <nav class="md-nav" aria-label="Parallelize">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.lang1" class="md-nav__link">
    lang1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.lang2" class="md-nav__link">
    lang2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.origfile1" class="md-nav__link">
    origfile1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.origfile2" class="md-nav__link">
    origfile2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.outfile_name" class="md-nav__link">
    outfile_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.align" class="md-nav__link">
    align()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.is_translated_from_lang2" class="md-nav__link">
    is_translated_from_lang2()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.parallelize_files" class="md-nav__link">
    parallelize_files()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.run_command" class="md-nav__link">
    run_command()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Parallelize.setup_anchors" class="md-nav__link">
    setup_anchors()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeHunalign" class="md-nav__link">
    ParallelizeHunalign
  </a>
  
    <nav class="md-nav" aria-label="ParallelizeHunalign">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeHunalign.align" class="md-nav__link">
    align()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeHunalign.anchor_to_dict" class="md-nav__link">
    anchor_to_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeHunalign.make_dict" class="md-nav__link">
    make_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeHunalign.to_sents" class="md-nav__link">
    to_sents()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeTCA2" class="md-nav__link">
    ParallelizeTCA2
  </a>
  
    <nav class="md-nav" aria-label="ParallelizeTCA2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeTCA2.sentfiles" class="md-nav__link">
    sentfiles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeTCA2.align" class="md-nav__link">
    align()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeTCA2.divide_p_into_sentences" class="md-nav__link">
    divide_p_into_sentences()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.ParallelizeTCA2.generate_anchor_file" class="md-nav__link">
    generate_anchor_file()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.Tca2SentenceDivider" class="md-nav__link">
    Tca2SentenceDivider
  </a>
  
    <nav class="md-nav" aria-label="Tca2SentenceDivider">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Tca2SentenceDivider.make_sentence_file" class="md-nav__link">
    make_sentence_file()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corpustools.parallelize.Tca2SentenceDivider.make_sentence_xml" class="md-nav__link">
    make_sentence_xml()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.main" class="md-nav__link">
    main()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.parallelise_file" class="md-nav__link">
    parallelise_file()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corpustools.parallelize.parse_options" class="md-nav__link">
    parse_options()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>parallelize</h1>

<div class="doc doc-object doc-module">


<a id="corpustools.parallelize"></a>
  <div class="doc doc-contents first">
  
      <p>Classes and functions to sentence align two files.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="corpustools.parallelize.Parallelize" class="doc doc-heading">
        <code>Parallelize</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>A class to parallelize two files.</p>
<p>Input is the xml file that should be parallellized and the language that it
should be parallellized with.
The language of the input file is found in the metadata of the input file.
The other file is found via the metadata in the input file</p>


        <details class="quote">
          <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Parallelize</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A class to parallelize two files.</span>

<span class="sd">    Input is the xml file that should be parallellized and the language that it</span>
<span class="sd">    should be parallellized with.</span>
<span class="sd">    The language of the input file is found in the metadata of the input file.</span>
<span class="sd">    The other file is found via the metadata in the input file</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">origfile1</span><span class="p">,</span> <span class="n">lang2</span><span class="p">,</span> <span class="n">anchor_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialise the Parallelize class.</span>

<span class="sd">        Args:</span>
<span class="sd">            origfile1 (str): path to one of the files that should be</span>
<span class="sd">                sentence aligned.</span>
<span class="sd">            lang2 (str): language of the other file that should be</span>
<span class="sd">                sentence aligned.</span>
<span class="sd">            anchor_file (str): path to the anchor file. Defaults to None.</span>
<span class="sd">                A real file is only needed when using tca2 for sentence</span>
<span class="sd">                alignment.</span>
<span class="sd">            quiet (bool): If True, be verbose. Otherwise, be quiet.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span> <span class="o">=</span> <span class="n">quiet</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">giella_prefix</span> <span class="o">=</span> <span class="n">giella_prefix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">corpuspath</span><span class="o">.</span><span class="n">CorpusPath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">origfile1</span><span class="p">)))</span>

        <span class="n">para_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parallel</span><span class="p">(</span><span class="n">lang2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">para_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">corpuspath</span><span class="o">.</span><span class="n">CorpusPath</span><span class="p">(</span><span class="n">para_file</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">origfile1</span><span class="si">}</span><span class="s2"> doesn&#39;t have a parallel file in </span><span class="si">{</span><span class="n">lang2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># As stated in --help, we assume user-specified anchor file</span>
        <span class="c1"># has columns based on input files, where --parallel_file is</span>
        <span class="c1"># column two regardless of what file was translated from what,</span>
        <span class="c1"># therefore we set this before reshuffling:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_translated_from_lang2</span><span class="p">():</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup_anchors</span><span class="p">(</span><span class="n">anchor_file</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setup_anchors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Setup anchor file.</span>

<span class="sd">        Args:</span>
<span class="sd">            path (str): where the anchor file will be written.</span>
<span class="sd">            cols (list of str): list of all the possible langs.</span>

<span class="sd">        Returns:</span>
<span class="sd">            generate_anchor_list.GenerateAnchorList</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">path1</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;GTHOME&quot;</span><span class="p">],</span>
                <span class="sa">f</span><span class="s2">&quot;gt/common/src/anchor-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">path2</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;GTHOME&quot;</span><span class="p">],</span>
                <span class="sa">f</span><span class="s2">&quot;gt/common/src/anchor-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path1</span><span class="p">):</span>

                <span class="k">return</span> <span class="n">generate_anchor_list</span><span class="o">.</span><span class="n">GenerateAnchorList</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">],</span> <span class="n">path1</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path2</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">generate_anchor_list</span><span class="o">.</span><span class="n">GenerateAnchorList</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">],</span> <span class="n">path2</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
                    <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span>
                        <span class="s2">&quot;No anchor file for the </span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2"> combo. &quot;</span>
                        <span class="s2">&quot;Making a fake anchor file&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">)</span>
                    <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">outfile_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compute the name of the final tmx file.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">prestable_tmx</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lang1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get language 1.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pathcomponents</span><span class="o">.</span><span class="n">lang</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lang2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get language 2.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">pathcomponents</span><span class="o">.</span><span class="n">lang</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">origfile1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the original file 1.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">orig</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">origfile2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the original file 2.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">orig</span>

    <span class="k">def</span> <span class="nf">is_translated_from_lang2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find out if the given doc is translated from lang2.&quot;&quot;&quot;</span>
        <span class="n">translated_from</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="s2">&quot;translated_from&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">translated_from</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">translated_from</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">parallelize_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parallelize two files.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
            <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span><span class="s2">&quot;Aligning files &quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">align</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a parallelize command and return its output.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
            <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span><span class="s2">&quot;Running </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command</span><span class="p">)))</span>
        <span class="n">subp</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
        <span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">=</span> <span class="n">subp</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">subp</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">UserWarning</span><span class="p">(</span>
                <span class="s2">&quot;Could not parallelize </span><span class="si">{}</span><span class="s2"> and </span><span class="si">{}</span><span class="s2"> into &quot;</span>
                <span class="s2">&quot;sentences</span><span class="se">\n</span><span class="si">{}</span><span class="se">\n\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">origfile1</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">origfile2</span><span class="p">,</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">),</span>
                    <span class="n">error</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">),</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">output</span><span class="p">,</span> <span class="n">error</span>

    <span class="k">def</span> <span class="nf">align</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sentence align two corpus files.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;You have to subclass and override align&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="corpustools.parallelize.Parallelize.lang1" class="doc doc-heading">
<code class="highlight language-python"><span class="n">lang1</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get language 1.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="corpustools.parallelize.Parallelize.lang2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">lang2</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get language 2.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="corpustools.parallelize.Parallelize.origfile1" class="doc doc-heading">
<code class="highlight language-python"><span class="n">origfile1</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Name of the original file 1.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="corpustools.parallelize.Parallelize.origfile2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">origfile2</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Name of the original file 2.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="corpustools.parallelize.Parallelize.outfile_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">outfile_name</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Compute the name of the final tmx file.</p>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.Parallelize.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">origfile1</span><span class="p">,</span> <span class="n">lang2</span><span class="p">,</span> <span class="n">anchor_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Initialise the Parallelize class.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>origfile1</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>path to one of the files that should be
sentence aligned.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>lang2</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>language of the other file that should be
sentence aligned.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>anchor_file</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>path to the anchor file. Defaults to None.
A real file is only needed when using tca2 for sentence
alignment.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>quiet</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>If True, be verbose. Otherwise, be quiet.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">origfile1</span><span class="p">,</span> <span class="n">lang2</span><span class="p">,</span> <span class="n">anchor_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialise the Parallelize class.</span>

<span class="sd">    Args:</span>
<span class="sd">        origfile1 (str): path to one of the files that should be</span>
<span class="sd">            sentence aligned.</span>
<span class="sd">        lang2 (str): language of the other file that should be</span>
<span class="sd">            sentence aligned.</span>
<span class="sd">        anchor_file (str): path to the anchor file. Defaults to None.</span>
<span class="sd">            A real file is only needed when using tca2 for sentence</span>
<span class="sd">            alignment.</span>
<span class="sd">        quiet (bool): If True, be verbose. Otherwise, be quiet.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span> <span class="o">=</span> <span class="n">quiet</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">giella_prefix</span> <span class="o">=</span> <span class="n">giella_prefix</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">corpuspath</span><span class="o">.</span><span class="n">CorpusPath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">origfile1</span><span class="p">)))</span>

    <span class="n">para_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parallel</span><span class="p">(</span><span class="n">lang2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">para_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">corpuspath</span><span class="o">.</span><span class="n">CorpusPath</span><span class="p">(</span><span class="n">para_file</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">origfile1</span><span class="si">}</span><span class="s2"> doesn&#39;t have a parallel file in </span><span class="si">{</span><span class="n">lang2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># As stated in --help, we assume user-specified anchor file</span>
    <span class="c1"># has columns based on input files, where --parallel_file is</span>
    <span class="c1"># column two regardless of what file was translated from what,</span>
    <span class="c1"># therefore we set this before reshuffling:</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_translated_from_lang2</span><span class="p">():</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">gal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup_anchors</span><span class="p">(</span><span class="n">anchor_file</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.Parallelize.align" class="doc doc-heading">
<code class="highlight language-python"><span class="n">align</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Sentence align two corpus files.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">align</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sentence align two corpus files.&quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;You have to subclass and override align&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.Parallelize.is_translated_from_lang2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_translated_from_lang2</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Find out if the given doc is translated from lang2.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">is_translated_from_lang2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find out if the given doc is translated from lang2.&quot;&quot;&quot;</span>
    <span class="n">translated_from</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="s2">&quot;translated_from&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">translated_from</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">translated_from</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.Parallelize.parallelize_files" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parallelize_files</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Parallelize two files.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">parallelize_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parallelize two files.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
        <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span><span class="s2">&quot;Aligning files &quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">align</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.Parallelize.run_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Run a parallelize command and return its output.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run a parallelize command and return its output.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
        <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span><span class="s2">&quot;Running </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command</span><span class="p">)))</span>
    <span class="n">subp</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
    <span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">=</span> <span class="n">subp</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">subp</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">UserWarning</span><span class="p">(</span>
            <span class="s2">&quot;Could not parallelize </span><span class="si">{}</span><span class="s2"> and </span><span class="si">{}</span><span class="s2"> into &quot;</span>
            <span class="s2">&quot;sentences</span><span class="se">\n</span><span class="si">{}</span><span class="se">\n\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">origfile1</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">origfile2</span><span class="p">,</span>
                <span class="n">output</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">),</span>
                <span class="n">error</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">output</span><span class="p">,</span> <span class="n">error</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.Parallelize.setup_anchors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setup_anchors</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Setup anchor file.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>path</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>where the anchor file will be written.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cols</code></td>
          <td>
                <code>list of str</code>
          </td>
          <td><p>list of all the possible langs.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>generate_anchor_list.GenerateAnchorList</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setup_anchors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Setup anchor file.</span>

<span class="sd">    Args:</span>
<span class="sd">        path (str): where the anchor file will be written.</span>
<span class="sd">        cols (list of str): list of all the possible langs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        generate_anchor_list.GenerateAnchorList</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">path1</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;GTHOME&quot;</span><span class="p">],</span>
            <span class="sa">f</span><span class="s2">&quot;gt/common/src/anchor-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">path2</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;GTHOME&quot;</span><span class="p">],</span>
            <span class="sa">f</span><span class="s2">&quot;gt/common/src/anchor-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path1</span><span class="p">):</span>

            <span class="k">return</span> <span class="n">generate_anchor_list</span><span class="o">.</span><span class="n">GenerateAnchorList</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">],</span> <span class="n">path1</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path2</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">generate_anchor_list</span><span class="o">.</span><span class="n">GenerateAnchorList</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">],</span> <span class="n">path2</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
                <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span>
                    <span class="s2">&quot;No anchor file for the </span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2"> combo. &quot;</span>
                    <span class="s2">&quot;Making a fake anchor file&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">)</span>
                <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="corpustools.parallelize.ParallelizeHunalign" class="doc doc-heading">
        <code>ParallelizeHunalign</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="corpustools.parallelize.Parallelize" href="#corpustools.parallelize.Parallelize">Parallelize</a></code></p>

  
      <p>Use hunalign to parallelise two converted corpus files.</p>


        <details class="quote">
          <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ParallelizeHunalign</span><span class="p">(</span><span class="n">Parallelize</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use hunalign to parallelise two converted corpus files.&quot;&quot;&quot;</span>

    <span class="n">split_anchors_on</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot; *, *&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">anchor_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">words_pairs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Turn anchorfile tuples into a dictionary.&quot;&quot;&quot;</span>
        <span class="c1"># turn [(&quot;foo, bar&quot;, &quot;fie&quot;)] into [(&quot;foo&quot;, &quot;fie&quot;), (&quot;bar&quot;, &quot;fie&quot;)]:</span>
        <span class="n">expanded_pairs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">w1</span><span class="p">,</span> <span class="n">w2</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">w1s</span><span class="p">,</span> <span class="n">w2s</span> <span class="ow">in</span> <span class="n">words_pairs</span>
            <span class="k">for</span> <span class="n">w1</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">split_anchors_on</span><span class="p">,</span> <span class="n">w1s</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">w2</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">split_anchors_on</span><span class="p">,</span> <span class="n">w2s</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">w1</span> <span class="ow">and</span> <span class="n">w2</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">expanded_pairs</span>

    <span class="k">def</span> <span class="nf">make_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Turn an anchorlist to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">lang1</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang1</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">lang2</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span>
            <span class="n">words_pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">read_anchors</span><span class="p">(</span><span class="n">quiet</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">)</span>
            <span class="n">expanded_pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor_to_dict</span><span class="p">(</span><span class="n">words_pairs</span><span class="p">)</span>
            <span class="n">cleaned_pairs</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">(</span><span class="n">w1</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">w2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">w1</span><span class="p">,</span> <span class="n">w2</span> <span class="ow">in</span> <span class="n">expanded_pairs</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cleaned_pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">)]</span>
        <span class="c1"># Hunalign expects the _reverse_ format for the dictionary!</span>
        <span class="c1"># See Dictionary under http://mokk.bme.hu/resources/hunalign/</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">w2</span><span class="si">}</span><span class="s2"> @ </span><span class="si">{</span><span class="n">w1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">w1</span><span class="p">,</span> <span class="n">w2</span> <span class="ow">in</span> <span class="n">cleaned_pairs</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">to_sents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origfile</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Divide the content of origfile to sentences.&quot;&quot;&quot;</span>
        <span class="n">divider</span> <span class="o">=</span> <span class="n">sentencedivider</span><span class="o">.</span><span class="n">SentenceDivider</span><span class="p">(</span>
            <span class="n">origfile</span><span class="o">.</span><span class="n">pathcomponents</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">giella_prefix</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">divider</span><span class="o">.</span><span class="n">make_valid_sentences</span><span class="p">(</span>
                <span class="n">sentencedivider</span><span class="o">.</span><span class="n">to_plain_text</span><span class="p">(</span>
                    <span class="n">origfile</span><span class="o">.</span><span class="n">pathcomponents</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="n">origfile</span><span class="o">.</span><span class="n">converted</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">align</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parallelize two files using hunalign.&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">tmp</span><span class="p">():</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Temporary filename.</span>

<span class="sd">            Returns:</span>
<span class="sd">                str: name of the temporary file</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="s2">&quot;wb&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">tmp</span><span class="p">()</span> <span class="k">as</span> <span class="n">dict_f</span><span class="p">,</span> <span class="n">tmp</span><span class="p">()</span> <span class="k">as</span> <span class="n">sent0_f</span><span class="p">,</span> <span class="n">tmp</span><span class="p">()</span> <span class="k">as</span> <span class="n">sent1_f</span><span class="p">:</span>
            <span class="n">dict_f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">make_dict</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">))</span>
            <span class="n">sent0_f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_sents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">))</span>
            <span class="n">sent1_f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_sents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">))</span>
            <span class="n">dict_f</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="n">sent0_f</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="n">sent1_f</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

            <span class="n">command</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;hunalign&quot;</span><span class="p">,</span>
                <span class="s2">&quot;-utf&quot;</span><span class="p">,</span>
                <span class="s2">&quot;-realign&quot;</span><span class="p">,</span>
                <span class="s2">&quot;-text&quot;</span><span class="p">,</span>
                <span class="n">dict_f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">sent0_f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">sent1_f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="n">output</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

        <span class="n">translation_mem_ex</span> <span class="o">=</span> <span class="n">tmx</span><span class="o">.</span><span class="n">HunalignToTmx</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">translation_mem_ex</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.ParallelizeHunalign.align" class="doc doc-heading">
<code class="highlight language-python"><span class="n">align</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Parallelize two files using hunalign.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">align</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parallelize two files using hunalign.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">tmp</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Temporary filename.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: name of the temporary file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="s2">&quot;wb&quot;</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">tmp</span><span class="p">()</span> <span class="k">as</span> <span class="n">dict_f</span><span class="p">,</span> <span class="n">tmp</span><span class="p">()</span> <span class="k">as</span> <span class="n">sent0_f</span><span class="p">,</span> <span class="n">tmp</span><span class="p">()</span> <span class="k">as</span> <span class="n">sent1_f</span><span class="p">:</span>
        <span class="n">dict_f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">make_dict</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">))</span>
        <span class="n">sent0_f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_sents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">))</span>
        <span class="n">sent1_f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_sents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">))</span>
        <span class="n">dict_f</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
        <span class="n">sent0_f</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
        <span class="n">sent1_f</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

        <span class="n">command</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;hunalign&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-utf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-realign&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-text&quot;</span><span class="p">,</span>
            <span class="n">dict_f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">sent0_f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">sent1_f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">output</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

    <span class="n">translation_mem_ex</span> <span class="o">=</span> <span class="n">tmx</span><span class="o">.</span><span class="n">HunalignToTmx</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">translation_mem_ex</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.ParallelizeHunalign.anchor_to_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">anchor_to_dict</span><span class="p">(</span><span class="n">words_pairs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Turn anchorfile tuples into a dictionary.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">anchor_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">words_pairs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Turn anchorfile tuples into a dictionary.&quot;&quot;&quot;</span>
    <span class="c1"># turn [(&quot;foo, bar&quot;, &quot;fie&quot;)] into [(&quot;foo&quot;, &quot;fie&quot;), (&quot;bar&quot;, &quot;fie&quot;)]:</span>
    <span class="n">expanded_pairs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">w1</span><span class="p">,</span> <span class="n">w2</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">w1s</span><span class="p">,</span> <span class="n">w2s</span> <span class="ow">in</span> <span class="n">words_pairs</span>
        <span class="k">for</span> <span class="n">w1</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">split_anchors_on</span><span class="p">,</span> <span class="n">w1s</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">w2</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">split_anchors_on</span><span class="p">,</span> <span class="n">w2s</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">w1</span> <span class="ow">and</span> <span class="n">w2</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">expanded_pairs</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.ParallelizeHunalign.make_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">make_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Turn an anchorlist to a dictionary.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">make_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Turn an anchorlist to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">lang1</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang1</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">lang2</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span>
        <span class="n">words_pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">read_anchors</span><span class="p">(</span><span class="n">quiet</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">)</span>
        <span class="n">expanded_pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor_to_dict</span><span class="p">(</span><span class="n">words_pairs</span><span class="p">)</span>
        <span class="n">cleaned_pairs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">w1</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">w2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">w1</span><span class="p">,</span> <span class="n">w2</span> <span class="ow">in</span> <span class="n">expanded_pairs</span>
        <span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cleaned_pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="p">)]</span>
    <span class="c1"># Hunalign expects the _reverse_ format for the dictionary!</span>
    <span class="c1"># See Dictionary under http://mokk.bme.hu/resources/hunalign/</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">w2</span><span class="si">}</span><span class="s2"> @ </span><span class="si">{</span><span class="n">w1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">w1</span><span class="p">,</span> <span class="n">w2</span> <span class="ow">in</span> <span class="n">cleaned_pairs</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.ParallelizeHunalign.to_sents" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_sents</span><span class="p">(</span><span class="n">origfile</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Divide the content of origfile to sentences.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_sents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origfile</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Divide the content of origfile to sentences.&quot;&quot;&quot;</span>
    <span class="n">divider</span> <span class="o">=</span> <span class="n">sentencedivider</span><span class="o">.</span><span class="n">SentenceDivider</span><span class="p">(</span>
        <span class="n">origfile</span><span class="o">.</span><span class="n">pathcomponents</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">giella_prefix</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">divider</span><span class="o">.</span><span class="n">make_valid_sentences</span><span class="p">(</span>
            <span class="n">sentencedivider</span><span class="o">.</span><span class="n">to_plain_text</span><span class="p">(</span>
                <span class="n">origfile</span><span class="o">.</span><span class="n">pathcomponents</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="n">origfile</span><span class="o">.</span><span class="n">converted</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="corpustools.parallelize.ParallelizeTCA2" class="doc doc-heading">
        <code>ParallelizeTCA2</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="corpustools.parallelize.Parallelize" href="#corpustools.parallelize.Parallelize">Parallelize</a></code></p>

  
      <p>Use tca2 to parallelise two converted corpus files.</p>


        <details class="quote">
          <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ParallelizeTCA2</span><span class="p">(</span><span class="n">Parallelize</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use tca2 to parallelise two converted corpus files.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">generate_anchor_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outpath</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate an anchor file with lang1 and lang2.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">lang1</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang1</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">lang2</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">generate_file</span><span class="p">(</span><span class="n">outpath</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outpath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">outfile</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">divide_p_into_sentences</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tokenize the text in the given file and reassemble it again.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">pfile</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">:</span>
            <span class="n">divider</span> <span class="o">=</span> <span class="n">Tca2SentenceDivider</span><span class="p">()</span>
            <span class="n">divider</span><span class="o">.</span><span class="n">make_sentence_file</span><span class="p">(</span>
                <span class="n">pfile</span><span class="o">.</span><span class="n">pathcomponents</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span>
                <span class="n">pfile</span><span class="o">.</span><span class="n">converted</span><span class="p">,</span>
                <span class="n">pfile</span><span class="o">.</span><span class="n">sent_filename</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">giella_prefix</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sentfiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get files containing the sentences.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">sent_filename</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">align</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parallelize two files using tca2.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
            <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span><span class="s2">&quot;Adding sentence structure for the aligner &quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">divide_p_into_sentences</span><span class="p">()</span>

        <span class="n">tca2_jar</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">HERE</span><span class="p">,</span> <span class="s2">&quot;tca2/dist/lib/alignment.jar&quot;</span><span class="p">)</span>
        <span class="c1"># util.sanity_check([tca2_jar])</span>

        <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">anchor_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">generate_anchor_file</span><span class="p">(</span><span class="n">anchor_file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">anchor_file</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;java -Xms512m -Xmx1024m -jar </span><span class="si">{}</span><span class="s2"> -cli-plain -anchor=</span><span class="si">{}</span><span class="s2"> &quot;</span>
                <span class="s2">&quot;-in1=</span><span class="si">{}</span><span class="s2"> -in2=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">tca2_jar</span><span class="p">,</span>
                    <span class="n">anchor_file</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sent_filename</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sent_filename</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>

        <span class="n">translation_mem_ex</span> <span class="o">=</span> <span class="n">tmx</span><span class="o">.</span><span class="n">Tca2ToTmx</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentfiles</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">translation_mem_ex</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="corpustools.parallelize.ParallelizeTCA2.sentfiles" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sentfiles</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get files containing the sentences.</p>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.ParallelizeTCA2.align" class="doc doc-heading">
<code class="highlight language-python"><span class="n">align</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Parallelize two files using tca2.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">align</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parallelize two files using tca2.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
        <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span><span class="s2">&quot;Adding sentence structure for the aligner &quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">divide_p_into_sentences</span><span class="p">()</span>

    <span class="n">tca2_jar</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">HERE</span><span class="p">,</span> <span class="s2">&quot;tca2/dist/lib/alignment.jar&quot;</span><span class="p">)</span>
    <span class="c1"># util.sanity_check([tca2_jar])</span>

    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">anchor_file</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generate_anchor_file</span><span class="p">(</span><span class="n">anchor_file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">anchor_file</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
        <span class="n">command</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;java -Xms512m -Xmx1024m -jar </span><span class="si">{}</span><span class="s2"> -cli-plain -anchor=</span><span class="si">{}</span><span class="s2"> &quot;</span>
            <span class="s2">&quot;-in1=</span><span class="si">{}</span><span class="s2"> -in2=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">tca2_jar</span><span class="p">,</span>
                <span class="n">anchor_file</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sent_filename</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sent_filename</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>

    <span class="n">translation_mem_ex</span> <span class="o">=</span> <span class="n">tmx</span><span class="o">.</span><span class="n">Tca2ToTmx</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentfiles</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">translation_mem_ex</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.ParallelizeTCA2.divide_p_into_sentences" class="doc doc-heading">
<code class="highlight language-python"><span class="n">divide_p_into_sentences</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Tokenize the text in the given file and reassemble it again.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">divide_p_into_sentences</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tokenize the text in the given file and reassemble it again.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">pfile</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">origfiles</span><span class="p">:</span>
        <span class="n">divider</span> <span class="o">=</span> <span class="n">Tca2SentenceDivider</span><span class="p">()</span>
        <span class="n">divider</span><span class="o">.</span><span class="n">make_sentence_file</span><span class="p">(</span>
            <span class="n">pfile</span><span class="o">.</span><span class="n">pathcomponents</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span>
            <span class="n">pfile</span><span class="o">.</span><span class="n">converted</span><span class="p">,</span>
            <span class="n">pfile</span><span class="o">.</span><span class="n">sent_filename</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">giella_prefix</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.ParallelizeTCA2.generate_anchor_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">generate_anchor_file</span><span class="p">(</span><span class="n">outpath</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Generate an anchor file with lang1 and lang2.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_anchor_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outpath</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate an anchor file with lang1 and lang2.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">lang1</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang1</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">lang2</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gal</span><span class="o">.</span><span class="n">generate_file</span><span class="p">(</span><span class="n">outpath</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outpath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang1</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">outfile</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="corpustools.parallelize.Tca2SentenceDivider" class="doc doc-heading">
        <code>Tca2SentenceDivider</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Make tca2 compatible input files.</p>
<p>It spits out an xml document that has divided the text into sentences.
Each sentence is encased in an s tag, and has an id number</p>


        <details class="quote">
          <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Tca2SentenceDivider</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Make tca2 compatible input files.</span>

<span class="sd">    It spits out an xml document that has divided the text into sentences.</span>
<span class="sd">    Each sentence is encased in an s tag, and has an id number</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">make_sentence_xml</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">xmlfile</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Make sentence xml that tca2 can use.</span>

<span class="sd">        Args:</span>
<span class="sd">            lang (str): three character name of main language of document.</span>
<span class="sd">            filename (str): name of the xmlfile</span>

<span class="sd">        Returns:</span>
<span class="sd">            lxml.etree._Element: an xml element containing all sentences.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">document</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;document&quot;</span><span class="p">)</span>

        <span class="n">divider</span> <span class="o">=</span> <span class="n">sentencedivider</span><span class="o">.</span><span class="n">SentenceDivider</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
            <span class="n">divider</span><span class="o">.</span><span class="n">make_valid_sentences</span><span class="p">(</span><span class="n">sentencedivider</span><span class="o">.</span><span class="n">to_plain_text</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">xmlfile</span><span class="p">))</span>
        <span class="p">):</span>
            <span class="n">s_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
            <span class="n">s_elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="n">s_elem</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">sentence</span>
            <span class="n">document</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s_elem</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">document</span>

    <span class="k">def</span> <span class="nf">make_sentence_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lang</span><span class="p">,</span> <span class="n">xmlfile</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Make input document for tca2.</span>

<span class="sd">        Args:</span>
<span class="sd">            lang (str): three character name for main language of document.</span>
<span class="sd">            xmlfile (str): name of the xmlfile</span>
<span class="sd">            outfile (str): name of the input file for tca2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">o_path</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
        <span class="n">o_rel_path</span> <span class="o">=</span> <span class="n">o_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">util</span><span class="o">.</span><span class="n">ignored</span><span class="p">(</span><span class="ne">OSError</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">o_rel_path</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sentence_file</span><span class="p">:</span>
            <span class="n">tree</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">make_sentence_xml</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">xmlfile</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="o">=</span><span class="n">giella_prefix</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                <span class="n">sentence_file</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.Tca2SentenceDivider.make_sentence_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">make_sentence_file</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">xmlfile</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Make input document for tca2.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>lang</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>three character name for main language of document.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>xmlfile</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the xmlfile</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>outfile</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the input file for tca2</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">make_sentence_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lang</span><span class="p">,</span> <span class="n">xmlfile</span><span class="p">,</span> <span class="n">outfile</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Make input document for tca2.</span>

<span class="sd">    Args:</span>
<span class="sd">        lang (str): three character name for main language of document.</span>
<span class="sd">        xmlfile (str): name of the xmlfile</span>
<span class="sd">        outfile (str): name of the input file for tca2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">o_path</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
    <span class="n">o_rel_path</span> <span class="o">=</span> <span class="n">o_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">util</span><span class="o">.</span><span class="n">ignored</span><span class="p">(</span><span class="ne">OSError</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">o_rel_path</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sentence_file</span><span class="p">:</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">make_sentence_xml</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">xmlfile</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="o">=</span><span class="n">giella_prefix</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
            <span class="n">sentence_file</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="corpustools.parallelize.Tca2SentenceDivider.make_sentence_xml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">make_sentence_xml</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">xmlfile</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Make sentence xml that tca2 can use.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>lang</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>three character name of main language of document.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>name of the xmlfile</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>lxml.etree._Element: an xml element containing all sentences.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">make_sentence_xml</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">xmlfile</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Make sentence xml that tca2 can use.</span>

<span class="sd">    Args:</span>
<span class="sd">        lang (str): three character name of main language of document.</span>
<span class="sd">        filename (str): name of the xmlfile</span>

<span class="sd">    Returns:</span>
<span class="sd">        lxml.etree._Element: an xml element containing all sentences.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">document</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;document&quot;</span><span class="p">)</span>

    <span class="n">divider</span> <span class="o">=</span> <span class="n">sentencedivider</span><span class="o">.</span><span class="n">SentenceDivider</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">giella_prefix</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
        <span class="n">divider</span><span class="o">.</span><span class="n">make_valid_sentences</span><span class="p">(</span><span class="n">sentencedivider</span><span class="o">.</span><span class="n">to_plain_text</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">xmlfile</span><span class="p">))</span>
    <span class="p">):</span>
        <span class="n">s_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>
        <span class="n">s_elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="n">s_elem</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">sentence</span>
        <span class="n">document</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s_elem</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">document</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="corpustools.parallelize.main" class="doc doc-heading">
<code class="highlight language-python"><span class="n">main</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Parallelise files.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parallelise files.&quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parse_options</span><span class="p">()</span>

    <span class="c1"># TODO: filter out those pairs that already exist in presteable/tmx</span>
    <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">sources</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
                <span class="n">parallelise_file</span><span class="p">(</span>
                    <span class="n">source</span><span class="p">,</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">lang2</span><span class="p">,</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">dict</span><span class="p">,</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">quiet</span><span class="p">,</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">aligner</span><span class="p">,</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">force</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">converted</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">converted</span><span class="p">)</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">parallelise_file</span><span class="p">(</span>
                                <span class="n">path</span><span class="p">,</span>
                                <span class="n">args</span><span class="o">.</span><span class="n">lang2</span><span class="p">,</span>
                                <span class="n">args</span><span class="o">.</span><span class="n">dict</span><span class="p">,</span>
                                <span class="n">args</span><span class="o">.</span><span class="n">quiet</span><span class="p">,</span>
                                <span class="n">args</span><span class="o">.</span><span class="n">aligner</span><span class="p">,</span>
                                <span class="n">args</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
                                <span class="n">args</span><span class="o">.</span><span class="n">force</span><span class="p">,</span>
                            <span class="p">)</span>
                        <span class="k">except</span> <span class="ne">UserWarning</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">util</span><span class="o">.</span><span class="n">ArgumentError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="corpustools.parallelize.parallelise_file" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parallelise_file</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="n">lang2</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">quiet</span><span class="p">,</span> <span class="n">aligner</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">force</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Align sentences of two parallel files.</p>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">parallelise_file</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="n">lang2</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">quiet</span><span class="p">,</span> <span class="n">aligner</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">force</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Align sentences of two parallel files.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">aligner</span> <span class="o">==</span> <span class="s2">&quot;hunalign&quot;</span><span class="p">:</span>
            <span class="n">parallelizer</span> <span class="o">=</span> <span class="n">ParallelizeHunalign</span><span class="p">(</span>
                <span class="n">origfile1</span><span class="o">=</span><span class="n">input_file</span><span class="p">,</span> <span class="n">lang2</span><span class="o">=</span><span class="n">lang2</span><span class="p">,</span> <span class="n">anchor_file</span><span class="o">=</span><span class="n">dictionary</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="n">quiet</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">aligner</span> <span class="o">==</span> <span class="s2">&quot;tca2&quot;</span><span class="p">:</span>
            <span class="n">parallelizer</span> <span class="o">=</span> <span class="n">ParallelizeTCA2</span><span class="p">(</span>
                <span class="n">origfile1</span><span class="o">=</span><span class="n">input_file</span><span class="p">,</span> <span class="n">lang2</span><span class="o">=</span><span class="n">lang2</span><span class="p">,</span> <span class="n">anchor_file</span><span class="o">=</span><span class="n">dictionary</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="n">quiet</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">quiet</span><span class="p">:</span>
            <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>  <span class="c1"># parallel filename is empty</span>
        <span class="k">pass</span>

    <span class="k">else</span><span class="p">:</span>

        <span class="n">outfile</span> <span class="o">=</span> <span class="s2">&quot;/dev/stdout&quot;</span> <span class="k">if</span> <span class="n">stdout</span> <span class="k">else</span> <span class="n">parallelizer</span><span class="o">.</span><span class="n">outfile_name</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">outfile</span> <span class="o">==</span> <span class="s2">&quot;/dev/stdout&quot;</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span> <span class="ow">and</span> <span class="n">force</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">quiet</span><span class="p">:</span>
                <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Aligning </span><span class="si">{</span><span class="n">input_file</span><span class="si">}</span><span class="s2"> and its parallel file&quot;</span><span class="p">)</span>
            <span class="n">translation_mem_ex</span> <span class="o">=</span> <span class="n">parallelizer</span><span class="o">.</span><span class="n">parallelize_files</span><span class="p">()</span>
            <span class="n">translation_mem_ex</span><span class="o">.</span><span class="n">clean_toktmx</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">quiet</span><span class="p">:</span>
                <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating the tmx file </span><span class="si">{</span><span class="n">outfile</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">translation_mem_ex</span><span class="o">.</span><span class="n">write_tmx_file</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
            <span class="n">translation_mem_ex</span><span class="o">.</span><span class="n">tmx2html</span><span class="p">(</span><span class="n">parallelizer</span><span class="o">.</span><span class="n">outfile_name</span> <span class="o">+</span> <span class="s2">&quot;.html&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">quiet</span><span class="p">:</span>
                <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span><span class="s2">&quot;Wrote</span><span class="se">\n\t</span><span class="si">{}</span><span class="se">\n\t</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">outfile</span> <span class="o">+</span> <span class="s2">&quot;.html&quot;</span><span class="p">))</span>

            <span class="k">return</span> <span class="n">outfile</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">util</span><span class="o">.</span><span class="n">note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">outfile</span><span class="si">}</span><span class="s2"> already exists, skipping &quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="corpustools.parallelize.parse_options" class="doc doc-heading">
<code class="highlight language-python"><span class="n">parse_options</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Parse the commandline options.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>a list of arguments as parsed by argparse.Argumentparser.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/home/anders/projects/CorpusTools/corpustools/parallelize.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">parse_options</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse the commandline options.</span>

<span class="sd">    Returns:</span>
<span class="sd">        a list of arguments as parsed by argparse.Argumentparser.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
        <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">argparse_version</span><span class="o">.</span><span class="n">parser</span><span class="p">],</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Sentence align file pairs.&quot;</span>
    <span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;sources&quot;</span><span class="p">,</span>
        <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Files or directories to search for &quot;</span> <span class="s2">&quot;parallelisable files&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-s&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--stdout&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Whether output of the parallelisation &quot;</span>
        <span class="s2">&quot;should be written to stdout or a files. &quot;</span>
        <span class="s2">&quot;Defaults to &quot;</span>
        <span class="s2">&quot;prestable/tmx/</span><span class="si">{lang1}</span><span class="s2">2</span><span class="si">{lang2}</span><span class="s2">/</span><span class="si">{GENRE}</span><span class="s2">/.../</span><span class="si">{BASENAME}</span><span class="s2">.tmx&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--force&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Overwrite output file if it already exists.&quot;</span> <span class="s2">&quot;This is the default.&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_false&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-q&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--quiet&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Don&#39;t mention anything out of the ordinary.&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-a&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--aligner&quot;</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;hunalign&quot;</span><span class="p">,</span> <span class="s2">&quot;tca2&quot;</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;tca2&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Either hunalign or tca2 (the default).&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-d&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--dict&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Use a different bilingual seed dictionary. &quot;</span>
        <span class="s2">&quot;Must have two columns, with input_file language &quot;</span>
        <span class="s2">&quot;first, and --parallel_language second, separated &quot;</span>
        <span class="s2">&quot;by `/&#39;. By default, &quot;</span>
        <span class="s2">&quot;$GTHOME/gt/common/src/anchor.txt is used, but this &quot;</span>
        <span class="s2">&quot;file only supports pairings between &quot;</span>
        <span class="s2">&quot;sme/sma/smj/fin/eng/nob. &quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;-l2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;--lang2&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Indicate which language the given file should&quot;</span> <span class="s2">&quot;be parallelised with&quot;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">args</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.51198bba.min.js"></script>
      
    
  </body>
</html>